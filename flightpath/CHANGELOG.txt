FlightPath 5.x Changelog
========================


2017-02-19
  Fixed bug in duplicating degrees re: groups with var hours.

  Added a hook to allow modules to modify a term_id prior to getting its description.


2017-02-11
  Fixed another bug relating to the logic of pulling up a student when two advisors are
  working on the student at the same time.

  Modified some logic in _FlightPath to accomodate the double advisor issue bug.


2017-02-07
  Fixed advising session bug where advisors working at the same time on the same student might see
  each other's draft work.
  

2017-01-26
  Fixed bug where duplicating an entire year of courses was skipping over the max hours, if they were
  set to zero.
  

2017-01-19
  Fixed bug in duplicate degrees, where some of the new fields were not being included.
  

2017-01-18
  Fixed bug where advised identical courses in same semester, but in different degrees, FlightPath got confused about which
  course to check.
  
  Fixed bug where after clearing advising cache, an adviser showed invalid tabs.
  
  Fixed bug with variable hour courses not being selected after changing hour selector.
   
 
2017-01-14
  Made more changes, to ensure that users cannot access another student's data by manipulating
  URL variables. 
 
 
2017-01-04
  Handful of extra changes to logout function, again, for Safari browser bug. 
  
  Added more HTML comments to the course_search_display_courses render api call, to give
  more spots for custom modules to dig in and change/add content.
  

2017-01-03
  Added additional unsetting of SESSION vars when cache is cleared, to erase any potential problems.
  
  Working on logout function, to address issue from Safari browser where SESSION is not being
  destroyed correctly.
  

2017-01-02
  Altered the way the renderapi handles markup, so it always gets a CSS class we can
  use later.  Also, added weights to the AdvisingScreen's display_popup_course_descroption.
  
  Made minor CSS tweaks in other places too.
  
  Minor display bug in user module, list of majors for student
  

2016-12-28
  Minor changes to System to suppress PHP warnings in one area.


2016-12-22
  Fixed a bug with substitutions, where the required courses was the same in two different
  degrees, and the substituted courses was ALSO the same.  FlightPath was applying the sub
  to the first instance of the course requirement, and not necessarily the one the user selected.
  
  Worked on an issue where when two users are working on the same student, they should only pull up
  draft changes that THEY made, not that the other user made.
  
  To guarantee draft advising sessions aren't loaded inappropriately, when a faculty user loads
  a student's advising session, the draft versions are deleted.  This is to correct a bug.
  
  Fixed display bug of student's catalog year, in what if, when it is set to the Student mode in
  the settings.
  
  Fixed SQL bug in system.install, user_roles table didn't have primary key set up correctly.
  
  More work on advising sessions-- now saves a draft duplicate any time a new student is loaded.  This
  is to fix a bug which can occur when more than one advisor is working on a student in the same
  time period.
  

2016-12-16
  Added a new feature to let What If save & load with any catalog year.  Built into the system
  are the options "Current" and "Student".
  
  
2016-12-13
  Fixed bug where zero-hour courses were not allowing repeats correctly.
  
  Added more CSS classes and options to displaying degree titles.
  

2016-11-20
  Converted FlightPath and module licenses' to GNU AGPL Version 3.0.  Generally, it is compatible
  with the previous GPLv3 license, with one addition as it pertains to servers.
  See more here: http://getflightpath.com/gnu-agpl 
   

2016-11-16
  Added ability for a "locked" directive in the student_degrees table.  It lets you lock an entire
  degree classification from editing at a time.


2016-11-14
  Added minor CSS to "Change degree options" link.


2016-11-09
  Fixed minor PHP warning which pie charts were not enabled.
  

2016-11-05
  Made varius modifications to accomodate a student with no assigned major code, or, a major code which could
  not be found in the designated catalog year.


2016-11-01
  Fixed bug where identical courses which had all been advised were not correctly
  being counted as advised/fulfilled when only one was fulfilled, and before the advising term
  was advanced.
  

2016-10-28
  Added a setting to Configure School settings, to hide advising checkmarks if the student has enrolled
  in the course they were advised for (also works for completed as well).

  Added a new permission (in Admin module section) for user to be able to Delete courses, groups, or degrees.
  Also added those checks to the deletion functions for those forms.
  
  Fixed a bug in the course_search module, which was negating any effort to NOT have course names automatically
  capitalized.
  

2016-10-24
  Added new hook: hook_flightpath_can_assign_course_to_group().  It lets custom modules decide whether or not
  to allow a course into a particular group at all.
  

2016-10-19
  Fixed bug where a course over the min hours of a group was being skipped over.
  

2016-10-16
  Fixed a bug where groups with min hours weren't correctly being limited by substitutions.


2016-10-10
  Corrected logic on the min hours in groups code.


2016-10-08
  Added default setting to stop filling courses into a group once the min hours are met.
  
  Display of min hours correctly calculated in group select with min hours after advising.
  

2016-09-29
  Fixed a bug with pie charts where it was not taking a group's min_hours into account.  Also, told it to ignore
  the "hours_required_by_type" in pie chart calculations, since a group can only be assigned to one requirement type
  at a time.
  

2016-09-28
  Fixed bug where searching for lastname, firstname broke the search. 
  

2016-09-23
  Improved error handling for Execute PHP function.


2016-09-22
  Added extra documentation for the structure of term ID's setting, and an additional setting to the course search code to support the [Y+1]
  year adjust code.
  

2016-09-10
  Made various changes so that pie charts are rendered using a hook-able theme function, similar to Course Row, Footnot, etc.
  This allows outside modules to modify the pie charts.
  
  Also, the pie charts by default now list out progress for every degree the student is enrolled in.  
  

2016-08-24
  Changed system.install so that datetime field is given a real date (1970-01-01 00:00:01), not all zeros, by default.  This was
  necessary because on some MySQL configurations, zero dates are not allowed.
  
  Fixed bug in stats and batch modules, where they were not using constant names correctly (this is to make compatible with MySQL 5.7+)
  
  Made note in db errors that contain the text sql_mode= to see a documentation page regarding how to correct that.
  
  Adjusted install.php, settings.php, and _DatabaseHandler so that the db_port is its own value now.
  

2016-08-23
  Removed mysql_* functions from installation and settings files, to make PDO compatible and PHP 7 compatible.


2016-08-20
  Added setting for default 'allow dynamic' value.
  
  Fixed bug where draft mode wasn't being selected correctly when fetching degree_id.
  
  Added more CSS class names to elements on degree edit page.
  
  Adjusted CSS in packaged themes' style.css files for what if selection screen.
  
  Fixed What If selection so it pays attention to whether or not the degree was allowed
  to be combined with any other degree.
  

2016-08-04
  Fixed queries in admin (for viewing watchdog logs) to use better PDO system.
  
  Made variable_get/set respect NULL values, to ensure more effience caching and fewer db calls. 
  
  Fixed issue where identical transfer courses with different specific titles for the same student were not being retreived
  correctly.
    

2016-08-01
  Added jQuery includes in the print template files, in case they are needed for debugging.
  
  Fixed bug in History view, where "view/print all" wasn't correctly loading advising sessions
  in sequence.
  

2016-07-26
  Added ability to change popup window sizes in the System Settings form.  Popup window options are
  now stored in the FlightPath.settings javascript object.
  

2016-07-23
  Switched (much of) the course search module to use render arrays, so other modules can make changes.
  
  Added "back" link from Substitute popup


2016-07-16
  Fixed bug where sometimes subs in groups were not showing hours correctly, especially for transfer credits. Was
  fixed by ensuring the "req_by_degree_id" value was always passed along.
  
  Fixed bug in subs where "split sub hours" were being incorrectly reported.  This was because the course's data string
  was not being assembled correctly.

  Fixed issue where min/max hours for a group were not being displayed correctly.

  Added new theme hook, so modules can theme group select rows, to have custom messages.


2016-07-08
  Made tweaks to advising screen to make CSS re-themeing easier, and to make adding "extra html" easier to the group
  list popups as well as other areas.
  
  Made it so that function module_implements_hook() caches what it finds, at least for that one page load.  Helps speed up
  a little bit.
  
  Added new hook: hook_translate.  Called by t() function.
  
  

2016-06-29
  Fixed bug in Substitution system for split transfer subs, where hours were not being reported correctly.


2016-06-26
  Fixed bug in substitution reporting, where it wasn't correctly finding the split sub hours for transfer credits.
  
  Added new hook to core; to be able to alter footnotes.


2016-06-17
  Fixed bugs with substitution footnotes, in AdvisingScreenTypeView.  Substitutions were not being accurately displayed for footnotes.

  Added extra indexes to the box_array in AdvisingScreen, so it makes it easier to overwrite certain screen elements for other modules. 
  

2016-06-13
  Made alterations to fix a bug where the group a course was substituted into was not being reported correctly.
  

2016-05-25
  Converted the process that runs all group definitions for a year to a Batch API process, for better memory management and UI.
  

2016-05-24
  Added extra logic so that test scores with a date of null or 0000-00-00 will be given an "N/A" date, as well as extra CSS to help
  style the test scores.
  

2016-05-20
  Added setting to School Data form (system.module) for excluding degrees from "appears in" counts.
  
  Added method to DatabaseHandler-- get_degree_ids().
  

2016-05-19
  Adding "appears-in" counts for group select rows as well.


2016-05-16
  Added a new hook to let other modules decide if a course should be assigned to a particular degree or not.
  
  Removed some redundant database queries to help reduce queries per page load.


2016-05-11
  Added to AdvisingScreen so we add extra classes when a course appears in more than one degree.
    

2016-05-10
  Created an array in DegreePlan to keep track of every course that degree can possibly use.
  
  Added to $theme when drawing course rows, so we can move the degree_plan around as well.


2016-05-06
  Fixed bug in _CourseList.php, where min_grade wasn't being accurately taken into account when searching for find_best_match() courses.
  
  Added CSS class to the body tag to state what the student's rank is.
  
  Made it so any rendered button gets its title as its class, for extra CSS styling.
  

2016-04-22
  Added ability to "view/print all" advising histories, just like the comments.
  
  Added track descriptions to what if selection screen


2016-04-19
  Made various changes in AdvisingScreen, and added a new hook, so that course rows could be further themed by
  modules, before they are drawn on screen.  This is partially so that the prereqs module will more easily work.
  
  Added better CSS to admin.degrees.inc.

2016-04-14
  Added extra functionality to CourseList.
  

2016-04-09
  To prepare for dealing with prereqs, I changed the way the draw_course_row function is written in AdvisingScreen,
  to allow hooks to change elements of it.
  

2016-04-06
  Fixed isses with db queries which specified '?~?' or similar syntax, which is incompatible with the new PDO system.
  
  Changed checkboxes to use spans with classes for graphics, so we can easily overwrite as needed.
  

2016-04-05
  Replaced some hard-coded values with constants.
  
  Fixed bug with group titles in view and what if.

  Fixed mysql bug in course_search.module, fixed various issues which were causing "notices".
  

2016-04-04
  Fixed bug in what if selection screen for tracks.  Added new javascript function to create CSS-friendly strings.
  
  Added ability in System Settings to show group titles on View and What If screens, not just in print mode.
  

2016-04-01
  Fixed a bug in user.student.inc where major codes were not being read correctly from student_degrees table.
  

2016-03-31
  Added option to CourseList function sort_alphabetical_order, to include the degree's advising weight of the degree the course requires first, to make
  it also get sorted by degree.
  
  Changed the way semester blocks are drawn in AdvisingScreen, to group degrees together by advising weight, then name, alphabetically.
  Made similar changes to AdvisingScreenTypeView.  Also added more CSS classes to elements, making it easier to target.


2016-03-30
  Added extra class names when drawing courses and group selection rows.  Also, created new CSS class called "selection_highlight" that gets
  added and removed over certain items.  Updated theme css files to accomodate.
  

2016-03-29
  Fixed bug in what if selection screen.
  
  Cleaned up student search module a little, added extra CSS so that major codes more stylable.
  Also made student_search module PDO compliant, not relying on older mysql_real_escape_string function calls anymore.


2016-03-28
  Implemented hook for fp_get_student_majors().
  
  Added extra CSS classes to degrees in the currently advising box, making it easier to hide them through CSS. 

  Improved the fp_get_machine_readable() function, altered how form elements are rendered in render.inc so that
  elements with weird characters get safely handled.
  


2016-03-27
  Worked on What If selections screen, to work with new degree track selection configurations.
  

2016-03-20
  Fixed bug where permissions were not acting correctly in certain circumstances for viewing past advising sessions.


2016-03-17
  Added check on copy degree form to prevent accidental overwriting of existing degrees.
  

2016-03-14
  Added concept of min/max track selections to degrees.  Now, the user will be stopped if they select a number of tracks
  outside of the allowed range.
  
 
2016-03-08
  Added new permission checks to advise.module, and new permission-- limiting ability of user to only view their 
  specified advisee's advising sessions.  Needed to make that change for something to do with the student_files module.
   

2016-03-07
  Fixed bug where current draft catalog year wasn't being read correctly in _Course->load_descriptive_data()
  
  Fixed oversight where files input element didn't render attributes array, also added multiple=TRUE for files, too.
  

2016-03-02
  Made it to where if a group is worth more than 200 hours, its hour counts do not show in the group select row,
  or in the popup.
  
  
2016-03-01
  Fixed bug where courses were not reflecting the correct group they were assigned, in a multi-degree scenario.
  

2016-02-29
  Fixed bug where on install, the admin password wasn't set correctly.


2016-02-23
  Fixed issue with Course Search where faculty_id wasn't being saved as CWID, and where
  only first 20 rotation schedules were being returned instead of most recent 20.
  

2016-02-19
  Fixed bug in Copy Degree form submission, related to switch to PDO support.
  
  Fixed bug where min hours for a group weren't making it obtain the correct CSS class.
  

2016-02-18
  Fixed stray mysql_insert_id() command in _FlightPath.php.  Changed to db_insert_id().
  
  Made it to where if you skipped semesters on the degrees page, it will still show the blank
  boxes, at least before where you skipped.
  
  Fixed issue so that public notes (on degrees) show up correctly, no matter how many degrees
  are being combined.  


2016-02-17
  Fixed bug where group id was not being maintained for certain groups in popup window.
  
  Made various changes in an attempt to help speed up page loads.


2016-02-15
  Fixed bug in misc.inc which was causing a new database connection *every time* a connection was requested (instead of re-using the
  global one).
  

2016-02-13
  Fixed bug in install script so that track major codes can have up to 20 characters.
  
  Modified the add degree form, to check to make sure tracks and major codes don't contain spaces,
  as well as fall below the 20 character limit.
  
  Fixed but which was intruduced by removing submissions form sessions.  As a result, forms which didn't
  validate didn't retain values.  Instead made it so only password fields were hidden from the session.
  
  Added concept of an "advising weight" to degrees, and on the degree edit form.  This lets the admin set
  the order in which degrees are presented to a student.  Lower weights appear first.  Added new popup help
  topics to the degree edit page to help explain.
    

2016-02-11
  Made it to where combined degrees will overwrite semester block titles if they are set to.
  

2016-02-09
  Fixed MySQL bug when editing groups.  Fixed bug where group_min_hours_required should be group_min_hours_allowed in the database.
  Fixed bug in degree list filter when not using clean URLs.
  Fixed missing argument bug in db.inc for db_affected_rows().
  

2016-02-01
  Removed section from system.module where submissions were being temporarily stored in the session.  It wasn't being used anyway,
  and it presented a possible security issue on improperly secured servers.
  

2016-01-19
  Changed default password scheme to use new D7 inspired PHPass technique, instead of basic md5's.  Added new password.inc file, virtually identical to the
  one which ships with D7.
  

2016-01-14
  Converted the advising history tab to use the content render api, so other modules can add content to that page.
  Also made it so that past advising histories appear in a collapsible fieldset, to save space.
  

2016-01-11
  Changed course popup description to use new content render API system.
  
  Added "override_degree_hours" field to degrees and draft_degrees tables, and db_override_degree_hours in the _DegreeClass object,
  for future use.
  
  Made small tweaks to fix bugs so installation works correctly.
  

2016-01-07
  Workng on var hour groups, ie, "min_hours_allowed".  Also, added in mechanism for changing the name of FlightPath to something else, if desired.
  

2016-01-05
  Beginning work on optional min hours for groups.
  

2016-01-04
  Creating new render api system, for rendering arrays similar to form arrays.  This lets other modules hook in to make changes.
  
  Changed forms.inc to render.inc


2015-12-31
  Initial commit of 5.x branch, from 4.10-dev branch. Enough has changed to warrent naming this a new core version.